<div class="row">
    <div class="col-12">
        <h2>{{ isEdit ? 'Edit Blog' : 'Create New Blog' }}</h2>
    </div>
</div>

<div class="row mt-4">
    <div class="col-md-8 offset-md-2">
        
        <!-- Show loading message while schema initializes -->
        <div ng-if="!postSchema" class="alert alert-info">
            <i class="bi bi-hourglass-split"></i> Loading form...
        </div>

        <!-- Schema Form (only renders when postSchema is ready) -->
        <div ng-if="postSchema">
            <form name="newPostForm" ng-submit="onSubmit(newPostForm)" novalidate>
                
                
                <!-- Manual File Upload -->
                <div class="form-group mb-3">
                    <label class="form-label">Banner Image</label>
                    <input type="file" 
                           class="form-control" 
                           accept="image/*"
                           id="bannerInput"
                           onchange="angular.element(this).scope().onFileSelect(this.files[0])">
                    <small class="form-text text-muted">Upload a banner image for your post (optional)</small>
                </div>
                
                <!-- Schema Form Fields -->
                <div sf-schema="postSchema" 
                     sf-form="postForm" 
                     sf-model="post"></div>
                     
                <!-- Show existing banner in edit mode -->
                <div ng-if="isEdit && post.banner" class="mb-3">
                    <label class="form-label">Current Banner:</label><br>
                    <img ng-src="{{ BASE_STORAGE_URL + post.banner }}" 
                         alt="Current banner" 
                         class="img-thumbnail"
                         style="max-width: 300px; max-height: 200px;">
                </div>

            </form>
        </div>
    </div>
</div>

<style>
    .form-group {
        margin-bottom: 1rem;
    }
    
    .img-thumbnail {
        padding: .25rem;
        background-color: #fff;
        border: 1px solid #dee2e6;
        border-radius: .25rem;
    }
</style>